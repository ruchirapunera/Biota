const report = require('multiple-cucumber-html-reporter');
const fs = require("fs");

const date = new Date();
const formattedDate = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()} ${date.getHours()}:${date.getMinutes()}`;

report.generate({
     jsonDir: 'json-logs/',
    reportPath: "./reports/Briota_htmlreport.html",
    reportName: 'Briota_report.html',

    metadata: {
        browser: {
            name: 'chrome',
            version: '113.0.5672.93'
        },
        device: 'DESKTOP-B9DUA95',
        platform: {
            name: 'Windows 10 Pro',
            version: '21H2'
        }
    },

    customData: {
      title: 'Report Information',
      data: [
        { label: 'Project', value: 'Briota' },
        { label: 'Release', value: '1.0.0' },
        { label: 'Execution Start Time', value: formattedDate },
      ]
     }
    // customFooter: '<div style="text-align:center">Generated by Multiple Cucumber HTML Reporter at ' + formattedDate + '</div>'

    
})

module.exports = (on, config) => {
    on('task', {
      cucumberReport: () => {
        report.generate(cucumberReportOptions);
        return null;
      }
    });
  };